<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checklist de Veículo</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .input-group { margin-bottom: 10px; }
    label { font-weight: bold; display: block; margin-bottom: 5px; }
    input, select, textarea { width: 100%; padding: 8px; margin-bottom: 10px; }
    button { padding: 8px 15px; margin: 5px; cursor: pointer; }
    #relatorio { margin-top: 20px; padding: 10px; border: 1px solid #ddd; }
  </style>
</head>
<body>
  <h2>Checklist de Veículo</h2>

  <!-- Campos extras -->
  <div class="input-group">
    <label for="placa">Placa do Veículo:</label>
    <input type="text" id="placa">
  </div>
  <div class="input-group">
    <label for="motorista">Motorista:</label>
    <input type="text" id="motorista">
  </div>
  <div class="input-group">
    <label for="auxiliar">Auxiliar:</label>
    <input type="text" id="auxiliar">
  </div>

  <div id="checklist"></div>
  <button onclick="adicionarItem()">Adicionar Item</button>
  
  <h3>Relatório Semanal</h3>
  <textarea id="relatorioSemanal"></textarea><br>
  <button onclick="salvarRelatorio()">Salvar Relatório</button>

  <div id="relatorio">
    <h3>Dados Salvos</h3>
    <pre id="dadosSalvos"></pre>
  </div>

  <script>
    let checklist = JSON.parse(localStorage.getItem("checklist")) || [];
    let relatorioSemanal = localStorage.getItem("relatorioSemanal") || "";
    let infoExtras = JSON.parse(localStorage.getItem("infoExtras")) || {placa: "", motorista: "", auxiliar: ""};

    document.getElementById("relatorioSemanal").value = relatorioSemanal;
    document.getElementById("placa").value = infoExtras.placa;
    document.getElementById("motorista").value = infoExtras.motorista;
    document.getElementById("auxiliar").value = infoExtras.auxiliar;

    function renderChecklist() {
      let container = document.getElementById("checklist");
      container.innerHTML = "";
      checklist.forEach((item, index) => {
        container.innerHTML += `
          <div>
            <input type="text" value="${item}" onchange="editarItem(${index}, this.value)">
            <button onclick="removerItem(${index})">Remover</button>
          </div>`;
      });
      salvarLocal();
    }

    function adicionarItem() {
      checklist.push("Novo item");
      renderChecklist();
    }

    function editarItem(index, valor) {
      checklist[index] = valor;
      salvarLocal();
    }

    function removerItem(index) {
      checklist.splice(index, 1);
      renderChecklist();
    }

    function salvarRelatorio() {
      relatorioSemanal = document.getElementById("relatorioSemanal").value;
      localStorage.setItem("relatorioSemanal", relatorioSemanal);
      salvarLocal();
      atualizarDadosSalvos();
      alert("Relatório salvo com sucesso!");
    }

    function salvarLocal() {
      localStorage.setItem("checklist", JSON.stringify(checklist));
      infoExtras = {
        placa: document.getElementById("placa").value,
        motorista: document.getElementById("motorista").value,
        auxiliar: document.getElementById("auxiliar").value
      };
      localStorage.setItem("infoExtras", JSON.stringify(infoExtras));
      atualizarDadosSalvos();
    }

    function atualizarDadosSalvos() {
      document.getElementById("dadosSalvos").textContent = 
        "Placa: " + (infoExtras.placa || "") + "\n" +
        "Motorista: " + (infoExtras.motorista || "") + "\n" +
        "Auxiliar: " + (infoExtras.auxiliar || "") + "\n\n" +
        "Checklist:\n" + checklist.join("\n") + "\n\n" +
        "Relatório:\n" + relatorioSemanal;
    }

    // Salva sempre que mudar os campos extras
    document.getElementById("placa").addEventListener("input", salvarLocal);
    document.getElementById("motorista").addEventListener("input", salvarLocal);
    document.getElementById("auxiliar").addEventListener("input", salvarLocal);

    renderChecklist();
    atualizarDadosSalvos();
  </script>
</body>
</html>